(function(){"use strict";var e={6336:function(e,t,o){var i=o(9963),r=o(6252);function s(e,t,o,i,s,a){const n=(0,r.up)("Modal"),c=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)(r.HY,null,[e.error?((0,r.wg)(),(0,r.j4)(n,{key:0,onClose:t[0]||(t[0]=t=>e.error=!1),errorText:e.errorText},null,8,["errorText"])):(0,r.kq)("",!0),(0,r.Wm)(c,{onError:t[1]||(t[1]=t=>e.setError(t))})],64)}o(7658);var a=o(7327);class n{constructor(){(0,a.Z)(this,"coord",void 0),(0,a.Z)(this,"main",void 0),(0,a.Z)(this,"wind",void 0),(0,a.Z)(this,"clouds",void 0),(0,a.Z)(this,"weather",void 0),(0,a.Z)(this,"sys",void 0),(0,a.Z)(this,"visibility",void 0),(0,a.Z)(this,"name",void 0),this.coord={lon:0,lat:0},this.main={temp:0,feels_like:0,temp_min:0,temp_max:0,pressure:0,humidity:0},this.wind={speed:0,deg:0,gust:0},this.clouds={all:0},this.weather=[{id:0,main:"",description:"",icon:""}],this.sys={type:0,id:0,country:"",sunrise:0,sunset:0},this.visibility=0,this.name=""}}class c{constructor(){(0,a.Z)(this,"id",void 0),(0,a.Z)(this,"city",void 0),(0,a.Z)(this,"country_code",void 0),(0,a.Z)(this,"country",void 0),this.id=0,this.city="",this.country_code="",this.country=""}}var d=o(3907);const l="ADD_LOCATION",h="RESTORE_LOCATIONS",u="REMOVE_LOCATION",m="CHANGE_LOCATIONS";var p=(0,d.MT)({state:{currentWeather:new n,locations:new Array},mutations:{[l](e,t){let o=!1;e.locations.forEach((e=>{e.id===t.id&&(o=!0)})),o||(e.locations.push(t),localStorage.setItem("myWeatherLocations",JSON.stringify(e.locations)))},[h](e){const t=localStorage.getItem("myWeatherLocations");if(t){const o=JSON.parse(t);e.locations=o}},[u](e,t){const o=e.locations.findIndex((e=>e.id===t));e.locations.splice(o,1),localStorage.setItem("myWeatherLocations",JSON.stringify(e.locations))},[m](e,t){const o=e.locations.findIndex((e=>e.id===t.movingId)),i=e.locations.splice(o,1),r=e.locations.findIndex((e=>e.id===t.idTochange));e.locations.splice(r,0,i[0]),localStorage.setItem("myWeatherLocations",JSON.stringify(e.locations))}},actions:{},modules:{},getters:{getLocations(e){return e.locations},getLocationById:e=>t=>e.locations.find((e=>e.id===t))}}),w=o(3577);const g={class:"modal_backdrop"},y={class:"modal"},v=(0,r._)("header",{class:"modal_header"},"Error!",-1),f={class:"modal_text"};function _(e,t,o,i,s,a){return(0,r.wg)(),(0,r.iD)("div",g,[(0,r._)("div",y,[v,(0,r._)("div",f,(0,w.zw)(e.errorText),1),(0,r._)("button",{type:"button",class:"btn_close",onClick:t[0]||(t[0]=t=>e.$emit("close"))}," Close ")])])}var b=(0,r.aZ)({name:"ErrorModal",props:{errorText:{type:String,required:!0}},emits:["close"]}),k=o(3744);const Z=(0,k.Z)(b,[["render",_]]);var C=Z,L=(0,r.aZ)({name:"App",components:{Modal:C},data(){return{error:!1,errorText:""}},methods:{setError(e){this.error=!0,this.errorText=e}},created(){p.commit(h)}});const x=(0,k.Z)(L,[["render",s]]);var O=x,E=o(5205);(0,E.z)("/weather-widget/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var I=o(2201);function T(e,t,o,i,s,a){const n=(0,r.up)("weather-component");return(0,r.wg)(),(0,r.j4)(n,{weather:e.weather},null,8,["weather"])}const W={class:"header"},$={class:"weather"},j={class:"temperature"},S=["src"],D={class:"weather_temperature"},z={class:"description"},A={class:"weather_description"},F={class:"wind_pressure"},N={class:"weather_wind"},H={class:"weather_pressure"},q={class:"humidity_visibility"},V={class:"weather_humidity"},M={class:"weather_visibility"};function P(e,t,o,i,s,a){const n=(0,r.up)("font-awesome-icon"),c=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",{class:"root",style:(0,w.j5)({backgroundImage:`url(${e.bgImage})`})},[(0,r._)("div",W,[(0,r._)("h3",null,(0,w.zw)(e.weather?.name)+", "+(0,w.zw)(e.weather?.sys.country),1),(0,r.Wm)(c,{class:"",to:"/settings"},{default:(0,r.w5)((()=>[(0,r.Wm)(n,{class:"settings",icon:"fa-solid fa-gear fa-10x"})])),_:1})]),(0,r._)("div",$,[(0,r._)("div",j,[(0,r._)("img",{src:e.weatherIcon,alt:"weather image"},null,8,S),(0,r._)("span",D,(0,w.zw)(e.weatherTemp)+" C",1)]),(0,r._)("div",z,[(0,r._)("p",A," Feels like "+(0,w.zw)(e.weatherFeelsLikeTemp)+" C. "+(0,w.zw)(e.weatherDescription),1)]),(0,r._)("div",F,[(0,r.Wm)(n,{style:(0,w.j5)({transform:`rotate(${e.weather?.wind.deg-45}deg)`}),class:"wind_direction",icon:"fa-solid fa-location-arrow"},null,8,["style"]),(0,r._)("span",N,(0,w.zw)(e.weatherWindSpeed)+" m/s",1),(0,r._)("span",H,(0,w.zw)(e.weatherPressure)+" hPa",1)]),(0,r._)("div",q,[(0,r._)("span",V,"Humidity: "+(0,w.zw)(e.weatherHumidity)+" %",1),(0,r._)("span",M,"Visibility: "+(0,w.zw)(e.weatherVisibility),1)])])],4)}const R=e=>e.charAt(0).toUpperCase()+e.slice(1);class U{constructor(){(0,a.Z)(this,"coord",void 0),(0,a.Z)(this,"main",void 0),(0,a.Z)(this,"wind",void 0),(0,a.Z)(this,"clouds",void 0),(0,a.Z)(this,"weather",void 0),(0,a.Z)(this,"sys",void 0),(0,a.Z)(this,"visibility",void 0),(0,a.Z)(this,"name",void 0),this.coord={lon:0,lat:0},this.main={temp:0,feels_like:0,temp_min:0,temp_max:0,pressure:0,humidity:0},this.wind={speed:0,deg:0,gust:0},this.clouds={all:0},this.weather=[{id:0,main:"",description:"",icon:""}],this.sys={type:0,id:0,country:"",sunrise:0,sunset:0},this.visibility=0,this.name=""}}var J=(0,r.aZ)({name:"WeatherComponent",props:{weather:{type:Object,require:!0,default:()=>({coord:{lon:0,lat:0},main:{temp:0,feels_like:0,temp_min:0,temp_max:0,pressure:0,humidity:0},wind:{speed:0,deg:0,gust:0},clouds:{all:0},weather:[{id:0,main:"",description:"",icon:""}],visibility:0})}},data(){return{weatherIcon1:"",bgImage:"https://images.wallpaperscraft.ru/image/single/oblaka_nebo_goluboj_113445_2560x1440.jpg"}},computed:{weatherIcon(){return this.weather?.weather[0].icon?"http://openweathermap.org/img/wn/"+this.weather?.weather[0].icon+"@2x.png":""},weatherTemp(){return(this.weather?.main.temp-273).toFixed(1)},weatherFeelsLikeTemp(){return(this.weather?.main.feels_like-273).toFixed(1)},weatherWindSpeed(){return this.weather?.wind.speed.toFixed(1)},weatherHumidity(){return this.weather?.main.humidity.toFixed(0)},weatherPressure(){return this.weather?.main.pressure.toFixed(0)},weatherVisibility(){return this.weather?.visibility<1e3?`${this.weather?.visibility.toFixed(0)} m`:`${(this.weather?.visibility/1e3).toFixed(0)} km`},weatherDescription(){return R(this.weather?.weather[0].description)}}});const Y=(0,k.Z)(J,[["render",P],["__scopeId","data-v-9499ed68"]]);var B=Y;const G="f0694cc740867c7440b3be0552c0bf8f";var K=(0,r.aZ)({name:"HomeView",components:{WeatherComponent:B},emits:["error"],async created(){await this.getLocation(),await this.getWeather()},data(){return{weather:new U,location:""}},methods:{async getLocation(){const e="https://ipinfo.io/json?token=84b997d0b6009a",t=await fetch(e),o=await t.json();this.location=o.city},async getWeather(){try{const e=`https://api.openweathermap.org/data/2.5/weather?q=${this.location}&appid=${G}`,t=await fetch(e);if(200!==t.status)throw new Error(t.statusText);const o=await t.json();this.weather=o}catch(e){e instanceof Error&&this.setError(e.message)}},setError(e){this.$emit("error",e)}}});const Q=(0,k.Z)(K,[["render",T]]);var X=Q;const ee=e=>((0,r.dD)("data-v-31b1383c"),e=e(),(0,r.Cn)(),e),te={class:"settings"},oe={class:"header"},ie=ee((()=>(0,r._)("h3",null,"Locations",-1)));function re(e,t,o,i,s,a){const n=(0,r.up)("font-awesome-icon"),c=(0,r.up)("router-link"),d=(0,r.up)("location-card"),l=(0,r.up)("search-component");return(0,r.wg)(),(0,r.iD)("div",te,[(0,r._)("div",oe,[(0,r._)("button",{onClick:t[0]||(t[0]=(...t)=>e.$router.back&&e.$router.back(...t)),class:"back_button"},[(0,r.Wm)(n,{icon:"fa-solid fa-angles-left"})]),(0,r.Wm)(c,{class:"home_link",to:"/"},{default:(0,r.w5)((()=>[(0,r.Uk)(" Home")])),_:1}),ie]),e.locations?((0,r.wg)(),(0,r.iD)("div",{key:0,class:"locations",onDragstart:t[1]||(t[1]=(...t)=>e.setClass&&e.setClass(...t)),onDragend:t[2]||(t[2]=(...t)=>e.removeClass&&e.removeClass(...t)),onDragover:t[3]||(t[3]=(...t)=>e.moveLocation&&e.moveLocation(...t))},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.locations,(e=>((0,r.wg)(),(0,r.j4)(d,{"data-id":e.id,draggable:"true",class:"location",key:e.id,location:e},null,8,["data-id","location"])))),128))],32)):(0,r.kq)("",!0),(0,r.Wm)(l,{onError:t[4]||(t[4]=t=>e.setError(t))})])}const se={class:"root"},ae={class:"menu"};function ne(e,t,o,i,s,a){const n=(0,r.up)("font-awesome-icon"),c=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)("div",se,[(0,r._)("div",ae,[(0,r.Wm)(n,{class:"menu_icon",icon:"fa-solid fa-bars"})]),(0,r.Wm)(c,{to:`/city/${e.location.id}`,class:"location_name"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,w.zw)(e.location.city)+", "+(0,w.zw)(e.location.country),1)])),_:1},8,["to"]),(0,r._)("button",{onClick:t[0]||(t[0]=t=>e.removeLocation(e.location.id)),class:"delete"},[(0,r.Wm)(n,{class:"delete_icon",icon:"fa-solid fa-xmark"})])])}var ce=(0,r.aZ)({name:"LocationCard",props:{location:{type:Object,reqired:!0,default:()=>({id:0,city:"",country:""})}},methods:{removeLocation(e){p.commit(u,e)}}});const de=(0,k.Z)(ce,[["render",ne],["__scopeId","data-v-6f7b2ed6"]]);var le=de;const he={key:0,class:"results"};function ue(e,t,o,s,a,n){const c=(0,r.up)("search-result");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.wy)((0,r._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=t=>e.city=t),onInput:t[1]||(t[1]=(...t)=>e.searchTimeOut&&e.searchTimeOut(...t)),placeholder:"Start input place",class:"search_input"},null,544),[[i.nr,e.city]]),e.results?((0,r.wg)(),(0,r.iD)("div",he,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.results,(t=>((0,r.wg)(),(0,r.j4)(c,{key:t.id,onAddLocation:o=>e.addLocation(t)},{default:(0,r.w5)((()=>[(0,r.Uk)((0,w.zw)(t.city)+", "+(0,w.zw)(t.country),1)])),_:2},1032,["onAddLocation"])))),128))])):(0,r.kq)("",!0)],64)}const me={class:"result_item"};function pe(e,t,o,i,s,a){const n=(0,r.up)("font-awesome-icon");return(0,r.wg)(),(0,r.iD)("div",me,[(0,r._)("div",{class:"result_name",onClick:t[0]||(t[0]=t=>e.$emit("addLocation"))},[(0,r.WI)(e.$slots,"default",{},void 0,!0)]),(0,r._)("button",{onClick:t[1]||(t[1]=t=>e.$emit("addLocation")),class:"add_button"},[(0,r.Wm)(n,{class:"add_icon",icon:"fa-solid fa-plus"})])])}var we=(0,r.aZ)({name:"SearchResult",emits:["addLocation"],methods:{add(){this.$emit("addLocation")}}});const ge=(0,k.Z)(we,[["render",pe],["__scopeId","data-v-60c48978"]]);var ye=ge,ve=(0,r.aZ)({name:"SearchComponent",components:{SearchResult:ye},emits:["error"],data(){return{country:"",city:"",results:new Array,timer:0}},methods:{addLocation(e){p.commit(l,{id:e.id,city:e.city,country:e.country,country_code:e.country_code}),this.city="",this.results=[],this.$router.push(`city/${e.id}`)},async searchTimeOut(){this.timer&&(clearTimeout(this.timer),this.timer=0),this.timer=setTimeout((()=>{this.searchCity()}),500)},async searchCity(){try{const e=`https://nominatim.openstreetmap.org/search/${this.city}?format=json&addressdetails=1&limit=5&polygon_svg=1`,t=await fetch(e),o=await t.json(),i=o.map((e=>{if("object"==typeof e||null!==e)return{id:e.place_id,city:e.address.city?e.address.city:e.address.town?e.address.town:e.address.state,country:e.address.country,country_code:e.address.country_code}}));this.results=i}catch(e){e instanceof Error&&(this.setError(e.message),console.log(e.message))}},setError(e){this.$emit("error",e)}}});const fe=(0,k.Z)(ve,[["render",ue],["__scopeId","data-v-64113b57"]]);var _e=fe,be=(0,r.aZ)({name:"SettingsView",components:{LocationCard:le,SearchComponent:_e},emits:["error"],computed:{locations(){return p.getters.getLocations}},methods:{setClass(e){const t=e.target;t&&t.classList.add("selected")},removeClass(e){const t=e.target;t&&t.classList.remove("selected")},moveLocation(){const e=document.querySelector(".locations");e&&e.addEventListener("dragover",(t=>{t.preventDefault();const o=e.querySelector(".selected"),i=t.target,r=o!==i;r&&o?.dataset?.id&&i?.dataset?.id&&p.commit(m,{movingId:+o.dataset?.id,idTochange:+i.dataset?.id})}))},setError(e){this.$emit("error",e)}}});const ke=(0,k.Z)(be,[["render",re],["__scopeId","data-v-31b1383c"]]);var Ze=ke;function Ce(e,t,o,i,s,a){const n=(0,r.up)("weather-component");return(0,r.wg)(),(0,r.j4)(n,{weather:e.weather},null,8,["weather"])}var Le=(0,r.aZ)({name:"CityView",components:{WeatherComponent:B},emits:["error"],created(){this.location=p.getters.getLocationById(+this.$route.params.id),this.getWeather()},data(){return{weather:new U,location:new c}},methods:{async getWeather(){try{const e=`https://api.openweathermap.org/data/2.5/weather?q=${this.location.city},${this.location.country_code}&appid=${G}`,t=await fetch(e);if(200!==t.status)throw new Error(t.statusText);const o=await t.json();this.weather=o}catch(e){e instanceof Error&&this.setError(e.message)}},setError(e){this.$emit("error",e)}}});const xe=(0,k.Z)(Le,[["render",Ce]]);var Oe=xe;const Ee=[{path:"/",name:"Home",component:X},{path:"/settings",name:"Settings",component:Ze},{path:"/city/:id",name:"City",component:Oe}],Ie=(0,I.p7)({history:(0,I.PO)("/weather-widget/"),routes:Ee});var Te=Ie,We=o(3636),$e=o(7810),je=o(9417);We.vI.add(je.gr5,je._Wx,je.xiG,je.g82,je.r8p,je.$40);class Se extends HTMLElement{connectedCallback(){(0,i.ri)(O).use(p).use(Te).component("font-awesome-icon",$e.GN).mount("#app")}}customElements.define("weather-widget",Se)}},t={};function o(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,o),s.exports}o.m=e,function(){var e=[];o.O=function(t,i,r,s){if(!i){var a=1/0;for(l=0;l<e.length;l++){i=e[l][0],r=e[l][1],s=e[l][2];for(var n=!0,c=0;c<i.length;c++)(!1&s||a>=s)&&Object.keys(o.O).every((function(e){return o.O[e](i[c])}))?i.splice(c--,1):(n=!1,s<a&&(a=s));if(n){e.splice(l--,1);var d=r();void 0!==d&&(t=d)}}return t}s=s||0;for(var l=e.length;l>0&&e[l-1][2]>s;l--)e[l]=e[l-1];e[l]=[i,r,s]}}(),function(){o.d=function(e,t){for(var i in t)o.o(t,i)&&!o.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,i){var r,s,a=i[0],n=i[1],c=i[2],d=0;if(a.some((function(t){return 0!==e[t]}))){for(r in n)o.o(n,r)&&(o.m[r]=n[r]);if(c)var l=c(o)}for(t&&t(i);d<a.length;d++)s=a[d],o.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return o.O(l)},i=self["webpackChunkweather_widget"]=self["webpackChunkweather_widget"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=o.O(void 0,[998],(function(){return o(6336)}));i=o.O(i)})();
//# sourceMappingURL=app.76fbe3fa.js.map